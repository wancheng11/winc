<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç›´æ’­é—´</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #000;
            color: #fff;
            height: 100vh;
            overflow: hidden;
        }

        /* ç›´æ’­è§†é¢‘åŒºåŸŸ */
        .live-container {
            position: relative;
            width: 100%;
            height: 100vh;
            background: #000;
        }

        .live-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* é¡¶éƒ¨ä¿¡æ¯æ  */
        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px;
            display: flex;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
            z-index: 100;
        }

        .anchor-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .anchor-avatar {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            margin-right: 10px;
            border: 2px solid #fff;
        }

        .anchor-details {
            flex: 1;
        }

        .anchor-name {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .viewers-count {
            font-size: 12px;
            opacity: 0.8;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .viewers-count i {
            font-size: 14px;
        }

        .follow-btn {
            position: absolute;
            bottom: -4px;
            right: -4px;
            width: 18px;
            height: 18px;
            border-radius: 9px;
            background: #FF6B6B;
            border: 1.5px solid #fff;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .follow-btn .material-icons {
            font-size: 12px;
        }

        .follow-btn.followed {
            background: #52c41a;
        }

        .follow-btn.followed .material-icons {
            font-size: 14px;
        }

        /* åº•éƒ¨äº’åŠ¨åŒºåŸŸ */
        .bottom-area {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
        }

        /* è¯„è®ºåˆ—è¡¨ */
        .comments-container {
            position: absolute;
            bottom: 70px;
            left: 0;
            right: 0;
            max-height: 50vh;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            scroll-behavior: smooth;
        }

        .comment-item {
            background: rgba(0,0,0,0.3);
            padding: 8px 12px;
            border-radius: 20px;
            max-width: 80%;
            backdrop-filter: blur(5px);
            word-break: break-all;
        }

        .comment-user {
            color: #fff;
            font-weight: 500;
            margin-right: 5px;
        }

        .comment-user.other {
            color: #4D94FF;
        }

        .comment-text {
            color: #fff;
            font-size: 14px;
        }

        /* åº•éƒ¨è¾“å…¥æ  */
        .input-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            border-radius: 25px;
        }

        .comment-input {
            flex: 1;
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            color: #fff;
            font-size: 14px;
        }

        .comment-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            background: none;
            border: none;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 12px;
        }

        .action-btn .material-icons {
            font-size: 24px;
        }

        /* ç¤¼ç‰©é¢æ¿ */
        .gift-panel {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            border-radius: 20px 20px 0 0;
        }

        .gift-panel.show {
            transform: translateY(0);
        }

        .gift-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .gift-panel-header h3 {
            color: white;
            font-size: 16px;
            font-weight: 500;
        }

        .gift-panel-close {
            background: none;
            border: none;
            color: white;
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        .gift-panel-close:hover {
            background: rgba(255,255,255,0.1);
        }

        .gift-panel-close .material-icons {
            font-size: 20px;
        }

        .gift-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .gift-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .gift-icon {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gift-name {
            font-size: 12px;
            color: #fff;
        }

        .gift-price {
            font-size: 12px;
            color: #FFD700;
        }

        /* ç¤¼ç‰©åŠ¨ç”» */
        .gift-animation {
            position: absolute;
            left: 20px;
            bottom: 100px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }

        .gift-message {
            background: rgba(255, 215, 0, 0.2);  /* é‡‘è‰²èƒŒæ™¯ */
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 10px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: giftSlide 2s ease forwards;
        }

        @keyframes giftSlide {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }
            10% {
                transform: translateX(0);
                opacity: 1;
            }
            90% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-100%);
                opacity: 0;
            }
        }

        /* ç‚¹èµåŠ¨ç”» */
        .like-animation {
            position: absolute;
            bottom: 70px;
            right: 20px;
            pointer-events: none;
        }

        .like-icon {
            position: absolute;
            color: #FF6B6B;
            animation: likeFloat 2s ease-out forwards;
            opacity: 0;
        }

        @keyframes likeFloat {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        /* ç›´æ’­ç»Ÿè®¡ä¿¡æ¯ */
        .live-stats {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
        }

        .stats-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stats-item .material-icons {
            font-size: 16px;
            color: #FFD700;
        }

        /* å¼¹å¹•æ ·å¼ */
        .danmaku-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 200px;
            pointer-events: none;
            overflow: hidden;
        }

        .danmaku {
            position: absolute;
            white-space: nowrap;
            font-size: 14px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            animation: danmakuMove 8s linear;
            pointer-events: none;
        }

        @keyframes danmakuMove {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }

        /* ä¸»æ’­ç­‰çº§æ ·å¼ */
        .anchor-level {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(45deg, #FF4D4D, #FF8080);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 8px;
        }

        .anchor-badges {
            display: flex;
            gap: 4px;
            margin-top: 4px;
        }

        .badge {
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            background: rgba(255,255,255,0.2);
        }

        /* PKåŠŸèƒ½æ ·å¼ */
        .pk-container {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            display: none;
            padding: 20px;
        }

        .pk-container.active {
            display: block;
        }

        .pk-bar {
            height: 40px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            display: flex;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .pk-progress {
            height: 100%;
            transition: width 0.3s ease;
        }

        .pk-left { background: #FF4D4D; }
        .pk-right { background: #4D94FF; }

        .pk-info {
            display: flex;
            justify-content: space-between;
            color: #fff;
            font-size: 14px;
        }

        /* ç¤¼ç‰©ç‰¹æ•ˆæ ·å¼ */
        .gift-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: giftEffect 3s ease-out forwards;
            pointer-events: none;
        }

        @keyframes giftEffect {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            80% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        }

        /* äº’åŠ¨æŒ‰é’®æ ·å¼ */
        .interaction-buttons {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .interaction-btn {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            border: none;
        }

        .share-options {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .share-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
        }

        .share-content {
            position: relative;
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            animation: slideUp 0.3s ease;
        }

        .share-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .share-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 10px;
            cursor: pointer;
        }

        .share-item i {
            font-size: 32px;
            color: #666;
        }

        .share-item span {
            font-size: 12px;
            color: #333;
        }

        .share-cancel {
            width: 100%;
            padding: 12px;
            border: none;
            background: #f5f5f5;
            border-radius: 10px;
            font-size: 15px;
            color: #333;
            margin-top: 10px;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        /* æ·»åŠ /ä¿®æ”¹è¯„è®ºåŒºæ ·å¼ */
        .comments-container {
            position: absolute;
            bottom: 70px;
            left: 0;
            right: 0;
            max-height: 50vh;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            scroll-behavior: smooth;
        }

        .comment-item {
            background: rgba(0,0,0,0.3);
            padding: 8px 12px;
            border-radius: 20px;
            max-width: 80%;
            backdrop-filter: blur(5px);
            word-break: break-all;
        }

        /* ç¤¼ç‰©æ¶ˆæ¯ç‰¹æ®Šæ ·å¼ */
        .gift-message {
            background: rgba(255, 215, 0, 0.2);  /* é‡‘è‰²èƒŒæ™¯ */
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        /* ä¿æŒè¯„è®ºåŒºæ»šåŠ¨å¹³æ»‘ */
        .comments-container {
            scroll-behavior: smooth;
        }

        /* ç¡®ä¿è¯„è®ºå®¹å™¨å†…å®¹å¯ä»¥æ­£å¸¸æ»šåŠ¨ */
        .comments-container::-webkit-scrollbar {
            width: 5px;
        }

        .comments-container::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }

        .comments-container::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
        }

        /* ä¿®æ”¹å¤´åƒå®¹å™¨æ ·å¼ */
        .avatar-container {
            position: relative;
            margin-right: 10px;
        }

        /* ä¿®æ”¹å…³æ³¨æŒ‰é’®æ ·å¼ */
        .follow-btn {
            position: absolute;
            bottom: -6px;
            right: -6px;
            width: 24px;
            height: 24px;
            border-radius: 12px;
            background: #FF6B6B;
            border: 2px solid #fff;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .follow-btn .material-icons {
            font-size: 16px;
        }

        .follow-btn.followed {
            background: #52c41a;
        }

        .follow-btn.followed .material-icons {
            font-size: 14px;
        }

        /* ä¿®æ”¹ç¤¼ç‰©é¢æ¿æ ·å¼ */
        .gift-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 15px;
        }

        .gift-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            color: #999;
            cursor: pointer;
            position: relative;
        }

        .gift-tab.active {
            color: #fff;
        }

        .gift-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 20%;
            right: 20%;
            height: 2px;
            background: #FF6B6B;
        }

        .gift-content {
            display: none;
        }

        .gift-content.active {
            display: block;
        }

        /* ä¿®æ”¹ç¤¼ç‰©ç‰¹æ•ˆæ ·å¼ */
        @keyframes normalGift {
            0% { transform: scale(0); opacity: 0; }
            20% { transform: scale(1.2); opacity: 1; }
            40% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        @keyframes specialGift {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            20% { transform: scale(1.2) rotate(0deg); opacity: 1; }
            40% { transform: scale(1) rotate(0deg); opacity: 1; }
            60% { transform: scale(1.1) rotate(10deg); opacity: 1; }
            80% { transform: scale(1) rotate(-10deg); opacity: 1; }
            100% { transform: scale(0) rotate(180deg); opacity: 0; }
        }

        @keyframes luxuryGift {
            0% { transform: translate(-50%, 100%) scale(0); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            40% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            60% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            80% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -200%) scale(0); opacity: 0; }
        }

        .gift-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            z-index: 1000;
        }

        .gift-effect.normal {
            animation: normalGift 2s ease-out forwards;
        }

        .gift-effect.special {
            animation: specialGift 3s ease-out forwards;
        }

        .gift-effect.luxury {
            animation: luxuryGift 4s ease-out forwards;
        }

        /* æ·»åŠ ç¤¼ç‰©è½¨é“åŠ¨ç”» */
        .gift-track {
            position: fixed;
            left: 0;
            right: 0;
            height: 60px;
            pointer-events: none;
            z-index: 999;
        }

        .gift-track-1 { top: 20%; }
        .gift-track-2 { top: 40%; }
        .gift-track-3 { top: 60%; }

        @keyframes trackMove {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100vw); }
        }

        /* æ·»åŠ ç”¨æˆ·å¸æ•°å’Œï¿½ï¿½å€¼æŒ‰é’®æ ·å¼ */
        .user-coins {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #FFD700;
            font-size: 14px;
            margin-right: auto;
            margin-left: 15px;
        }

        .user-coins .material-icons {
            font-size: 18px;
        }

        .recharge-btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 2px;
            margin-left: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .recharge-btn:active {
            transform: scale(0.95);
        }

        .recharge-btn .material-icons {
            font-size: 14px;
        }

        /* å……å€¼å¼¹çª—æ ·å¼ */
        .recharge-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .recharge-content {
            background: white;
            width: 90%;
            max-width: 360px;
            border-radius: 20px;
            padding: 20px;
            animation: slideUp 0.3s ease;
        }

        .recharge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .recharge-header h3 {
            font-size: 18px;
            color: #333;
        }

        .recharge-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .recharge-item {
            background: #f8f8f8;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            position: relative;
            border: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .recharge-item:active {
            transform: scale(0.98);
        }

        .recharge-item.selected {
            border-color: #FF6B6B;
            background: #FFF0F0;
        }

        .amount {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .price {
            font-size: 14px;
            color: #FF6B6B;
        }

        .bonus {
            font-size: 12px;
            color: #FF9800;
            margin-top: 4px;
        }

        .tag {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #FF6B6B;
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 8px;
        }

        .payment-methods {
            margin-bottom: 20px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            background: #f8f8f8;
            cursor: pointer;
        }

        .payment-method img {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }

        .payment-method span {
            flex: 1;
            font-size: 15px;
            color: #333;
        }

        .payment-method i {
            color: #ddd;
        }

        .payment-method.active {
            background: #FFF0F0;
        }

        .payment-method.active i {
            color: #FF6B6B;
        }

        .confirm-recharge {
            width: 100%;
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .confirm-recharge:active {
            transform: scale(0.98);
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="live-container">
        <!-- ç›´æ’­è§†é¢‘ -->
        <video class="live-video" autoplay muted loop>
            <source src="path_to_your_video.mp4" type="video/mp4">
        </video>

        <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
        <div class="top-bar">
            <div class="anchor-info">
                <div class="avatar-container">
                    <img class="anchor-avatar" src="" alt="ä¸»æ’­å¤´åƒ">
                    <button class="follow-btn" onclick="toggleFollow(event)">
                        <i class="material-icons">add</i>
                    </button>
                </div>
                <div class="anchor-details">
                    <div class="anchor-name"></div>
                    <div class="viewers-count">
                        <i class="material-icons">visibility</i>
                        <span></span>
                    </div>
                </div>
                <div class="live-stats">
                    <div class="stats-item">
                        <i class="material-icons">favorite</i>
                        <span>0w</span>
                    </div>
                    <div class="stats-item">
                        <i class="material-icons">card_giftcard</i>
                        <span>0w</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¯„è®ºåŒº -->
        <div class="comments-container" id="commentsContainer"></div>

        <!-- å¼¹å¹•å®¹å™¨ -->
        <div class="danmaku-container" id="danmakuContainer"></div>

        <!-- PKå®¹å™¨ -->
        <div class="pk-container" id="pkContainer">
            <div class="pk-bar">
                <div class="pk-progress pk-left" style="width: 50%"></div>
                <div class="pk-progress pk-right" style="width: 50%"></div>
            </div>
            <div class="pk-info">
                <span>0</span>
                <span>05:00</span>
                <span>0</span>
            </div>
        </div>

        <!-- åº•éƒ¨æ“ä½œåŒº -->
        <div class="bottom-area">
            <div class="input-bar">
                <input type="text" id="commentInput" class="comment-input" placeholder="è¯´ç‚¹ä»€ä¹ˆ...">
                <div class="action-buttons">
                    <button class="action-btn" onclick="toggleGiftPanel()">
                        <i class="material-icons">card_giftcard</i>
                        <span>ç¤¼ç‰©</span>
                    </button>
                    <button class="action-btn" onclick="addLike()">
                        <i class="material-icons">favorite</i>
                        <span>ç‚¹èµ</span>
                    </button>
                    <button class="action-btn" onclick="shareStream()">
                        <i class="material-icons">share</i>
                        <span>åˆ†äº«</span>
                    </button>
                    <button class="action-btn" onclick="togglePK()">
                        <i class="material-icons">sports_kabaddi</i>
                        <span>PK</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ç¤¼ç‰©é¢æ¿ -->
        <div class="gift-panel" id="giftPanel">
            <div class="gift-panel-header">
                <h3>é€‰æ‹©ç¤¼ç‰©</h3>
                <div class="user-coins">
                    <i class="material-icons">monetization_on</i>
                    <span id="userCoins">888</span>å¸
                </div>
                <button class="gift-panel-close" onclick="toggleGiftPanel()">
                    <i class="material-icons">close</i>
                </button>
            </div>
            <div class="gift-grid">
                <div class="gift-item" onclick="sendGift('çˆ±å¿ƒ', 1, 'normal')">
                    <div class="gift-icon">â¤ï¸</div>
                    <div class="gift-name">çˆ±å¿ƒ</div>
                    <div class="gift-price">1å¸</div>
                </div>
                <div class="gift-item" onclick="sendGift('ç«ç‘°', 5, 'normal')">
                    <div class="gift-icon">ğŸŒ¹</div>
                    <div class="gift-name">ç«ç‘°</div>
                    <div class="gift-price">5å¸</div>
                </div>
                <div class="gift-item" onclick="sendGift('çš‡å† ', 20, 'special')">
                    <div class="gift-icon">ğŸ‘‘</div>
                    <div class="gift-name">çš‡å† </div>
                    <div class="gift-price">20å¸</div>
                </div>
                <div class="gift-item" onclick="sendGift('ç«ç®­', 100, 'luxury')">
                    <div class="gift-icon">ğŸš€</div>
                    <div class="gift-name">ç«ç®­</div>
                    <div class="gift-price">100å¸</div>
                </div>
            </div>
        </div>

        <!-- ç¤¼ç‰©åŠ¨ç”»å®¹å™¨ -->
        <div class="gift-animation" id="giftAnimation"></div>

        <!-- ç‚¹èµåŠ¨ç”»å®¹å™¨ -->
        <div class="like-animation" id="likeAnimation"></div>
    </div>

    <!-- æ·»åŠ å……å€¼å¼¹çª— -->
    <div class="recharge-modal" id="rechargeModal">
        <div class="recharge-content">
            <div class="recharge-header">
                <h3>å……å€¼ä¸­å¿ƒ</h3>
                <button class="close-btn" onclick="closeRechargeModal()">
                    <i class="material-icons">close</i>
                </button>
            </div>
            <div class="recharge-options">
                <div class="recharge-item" onclick="selectRechargeAmount(60)">
                    <div class="amount">60å¸</div>
                    <div class="price">ï¿¥6</div>
                </div>
                <div class="recharge-item" onclick="selectRechargeAmount(300)">
                    <div class="amount">300å¸</div>
                    <div class="price">ï¿¥30</div>
                    <div class="bonus">é€30å¸</div>
                </div>
                <div class="recharge-item recommended" onclick="selectRechargeAmount(980)">
                    <div class="amount">980å¸</div>
                    <div class="price">ï¿¥98</div>
                    <div class="bonus">é€150å¸</div>
                    <div class="tag">æ¨è</div>
                </div>
                <div class="recharge-item" onclick="selectRechargeAmount(1980)">
                    <div class="amount">1980å¸</div>
                    <div class="price">ï¿¥198</div>
                    <div class="bonus">é€400å¸</div>
                </div>
            </div>
            <div class="payment-methods">
                <div class="payment-method active">
                    <img src="path_to_wechat_icon.png" alt="å¾®ä¿¡æ”¯ä»˜">
                    <span>å¾®ä¿¡æ”¯ä»˜</span>
                    <i class="material-icons">check_circle</i>
                </div>
                <div class="payment-method">
                    <img src="path_to_alipay_icon.png" alt="æ”¯ä»˜å®">
                    <span>æ”¯ä»˜å®</span>
                    <i class="material-icons">check_circle</i>
                </div>
            </div>
            <button class="confirm-recharge" onclick="confirmRecharge()">ç¡®è®¤å……å€¼</button>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿè¯„è®ºæ•°æ®
        const mockComments = [
            { user: "ç”œå¿ƒå®è´", text: "ä¸»æ’­å¥½å¯çˆ±~" },
            { user: "æ˜Ÿæ˜Ÿä¹‹ç«", text: "è¿™æ­Œå¤ªå¥½å¬äº†" },
            { user: "æ¸…é£å¾æ¥", text: "ä¸»æ’­å”±å¾—çœŸå¥½" },
            { user: "å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ", text: "ç»™ä¸»æ’­æ‰“call" }
        ];

        // åˆå§‹åŒ–è¯„è®ºåŒº
        function initComments() {
            const container = document.getElementById('commentsContainer');
            mockComments.forEach(comment => {
                addComment(comment.user, comment.text);
            });
        }

        // æ·»åŠ è¯„è®º
        function addComment(user, text) {
            const container = document.getElementById('commentsContainer');
            const commentEl = document.createElement('div');
            commentEl.className = 'comment-item';
            
            // åˆ¤æ–­æ˜¯å¦æ˜¯å…¶ä»–ç”¨æˆ·
            const isOtherUser = user !== getUserName();
            
            commentEl.innerHTML = `
                <span class="comment-user ${isOtherUser ? 'other' : ''}">${user}</span>
                <span class="comment-text">${text}</span>
            `;
            container.appendChild(commentEl);
            container.scrollTop = container.scrollHeight;
        }

        // å¤„ç†è¯„è®ºè¾“å…¥
        document.getElementById('commentInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const text = this.value.trim();
                if (text) {
                    addComment('æˆ‘', text);
                    addDanmaku(text);
                    this.value = '';
                }
            }
        });

        // ç¤¼ç‰©é¢æ¿æ§åˆ¶
        function toggleGiftPanel() {
            const panel = document.getElementById('giftPanel');
            panel.classList.toggle('show');
        }

        // ä¿®æ”¹ç¤¼ç‰©è¿é€ç›¸å…³ä»£ç 
        let giftCounts = {};
        let giftTimers = {};
        let specialNumbers = [9, 19, 29, 39, 66, 88, 99, 520, 1314];

        function sendGift(giftName, price, type = 'normal') {
            const currentCoins = parseInt(document.getElementById('userCoins').textContent);
            
            if (currentCoins < price) {
                alert('ä½™é¢ä¸è¶³ï¼Œè¯·å…ˆå……å€¼');
                showRechargeModal();
                return;
            }
            
            // æ‰£é™¤é‡‘å¸
            document.getElementById('userCoins').textContent = currentCoins - price;
            
            // æ›´æ–°ç¤¼ç‰©è¿é€æ¬¡æ•°
            giftCounts[giftName] = (giftCounts[giftName] || 0) + 1;
            
            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            if (giftTimers[giftName]) {
                clearTimeout(giftTimers[giftName]);
            }
            
            // è®¾ç½®æ–°çš„å®šæ—¶å™¨
            giftTimers[giftName] = setTimeout(() => {
                delete giftCounts[giftName];
                delete giftTimers[giftName];
            }, 5000);
            
            // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°ç‰¹æ®Šæ•°å­—
            const count = giftCounts[giftName];
            const isSpecialNumber = specialNumbers.includes(count);
            
            // åˆ›å»ºç¤¼ç‰©ç‰¹æ•ˆ
            const effect = document.createElement('div');
            effect.className = `gift-effect ${type}`;
            
            // æ ¹æ®ä¸åŒç±»å‹å’Œæ˜¯å¦æ˜¯ç‰¹æ®Šæ•°å­—è®¾ç½®ä¸åŒçš„ç‰¹æ•ˆ
            let giftContent = '';
            if (isSpecialNumber) {
                // ç‰¹æ®Šæ•°å­—çš„æ ·å¼
                giftContent = `
                    <div style="font-size: ${type === 'luxury' ? 120 : 100}px;">${getGiftEmoji(giftName)}</div>
                    <div style="font-size: 40px; 
                               background: linear-gradient(45deg, #FFD700, #FFA500);
                               -webkit-background-clip: text;
                               background-clip: text;
                               color: transparent;
                               text-shadow: 0 2px 12px rgba(255,215,0,0.5);
                               animation: pulse 0.5s ease infinite alternate;">
                        ${giftName} Ã— ${count}
                    </div>
                    <div style="font-size: 24px; color: #FFD700; margin-top: 10px;">
                        ${getUserName()} é€å‡ºæƒŠå–œè¿å‡»ï¼
                    </div>
                `;
            } else {
                // æ™®é€šæ•°å­—çš„æ ·å¼
                switch(type) {
                    case 'normal':
                        giftContent = `
                            <div style="font-size: 60px;">${getGiftEmoji(giftName)}</div>
                            <div style="font-size: 24px; color: #fff;">
                                ${giftName} Ã— ${count}
                            </div>
                        `;
                        break;
                    case 'special':
                        giftContent = `
                            <div style="font-size: 80px;">${getGiftEmoji(giftName)}</div>
                            <div style="font-size: 28px; color: #FFD700;">
                                ${giftName} Ã— ${count}
                            </div>
                        `;
                        break;
                    case 'luxury':
                        giftContent = `
                            <div style="font-size: 100px;">${getGiftEmoji(giftName)}</div>
                            <div style="font-size: 32px; color: #FFD700;">
                                ${giftName} Ã— ${count}
                            </div>
                        `;
                        break;
                }
            }
            
            effect.innerHTML = giftContent;
            document.body.appendChild(effect);
            
            // åˆ›å»ºç¤¼ç‰©æ¶ˆæ¯
            const giftMessage = document.createElement('div');
            giftMessage.className = 'gift-message';
            giftMessage.innerHTML = `
                <span style="color: ${isSpecialNumber ? '#FFD700' : '#fff'}">${getUserName()}</span>
                é€å‡ºäº†
                <span style="color: ${isSpecialNumber ? '#FF69B4' : '#FFD700'}">${giftName} Ã— ${count}</span>
            `;
            
            // å°†ç¤¼ç‰©æ¶ˆæ¯æ·»åŠ åˆ°é¡¶éƒ¨æ˜¾ç¤ºåŒºåŸŸ
            const container = document.querySelector('.gift-animation');
            container.appendChild(giftMessage);
            
            // è®¾ç½®ç‰¹æ®Šæ•°å­—çš„åŠ¨ç”»æ•ˆæœ
            if (isSpecialNumber) {
                effect.style.animation = 'specialGiftEffect 1.5s ease-out forwards';
                giftMessage.style.animation = 'specialGiftMessage 2s ease-out forwards';
                
                // æ’­æ”¾ç‰¹æ®ŠéŸ³æ•ˆ
                playSpecialGiftSound();
                
                // æ·»åŠ é¢å¤–çš„è§†è§‰æ•ˆæœ
                createSpecialEffect(count);
            }
            
            // æ›´æ–°ç»Ÿè®¡å’Œå…¶ä»–åŠŸèƒ½
            updateGiftStats(price);
            if (isPKActive) {
                updatePKProgress(price);
            }
            
            // ç§»é™¤ç‰¹æ•ˆå…ƒç´ 
            const duration = isSpecialNumber ? 3000 : 2000;
            setTimeout(() => {
                effect.remove();
                giftMessage.remove();
            }, duration);
        }

        // æ·»åŠ ç‰¹æ®Šæ•°å­—æ•ˆæœ
        function createSpecialEffect(count) {
            const container = document.querySelector('.live-container');
            const effect = document.createElement('div');
            effect.className = 'special-number-effect';
            effect.innerHTML = `
                <div class="number-animation" style="
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    font-size: 120px;
                    font-weight: bold;
                    background: linear-gradient(45deg, #FFD700, #FFA500);
                    -webkit-background-clip: text;
                    background-clip: text;
                    color: transparent;
                    text-shadow: 0 0 20px rgba(255,215,0,0.5);
                    animation: numberPulse 1s ease infinite alternate;
                ">
                    ${count}
                </div>
            `;
            container.appendChild(effect);
            
            setTimeout(() => effect.remove(), 2000);
        }

        // æ·»åŠ ç‰¹æ®Šæ•°å­—åŠ¨ç”»æ ·å¼
        const specialStyles = `
        @keyframes numberPulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(1.2); }
        }

        @keyframes specialGiftEffect {
            0% { transform: scale(0); opacity: 0; }
            20% { transform: scale(1.2); opacity: 1; }
            40% { transform: scale(1); opacity: 1; }
            60% { transform: scale(1.1); opacity: 1; }
            80% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        @keyframes specialGiftMessage {
            0% { transform: translateX(-100%); opacity: 0; }
            20% { transform: translateX(0); opacity: 1; }
            80% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(-100%); opacity: 0; }
        }
        `;

        // å°†ç‰¹æ®Šæ ·å¼æ·»åŠ åˆ°é¡µé¢
        const styleSheet = document.createElement('style');
        styleSheet.textContent = specialStyles;
        document.head.appendChild(styleSheet);

        // æ’­æ”¾ç‰¹æ®Šç¤¼ç‰©éŸ³æ•ˆ
        function playSpecialGiftSound() {
            const audio = new Audio('path_to_special_sound.mp3');
            audio.play().catch(e => console.log('æ’­æ”¾éŸ³æ•ˆå¤±è´¥:', e));
        }

        // è·å–ç¤¼ç‰©å¯¹åº”çš„emoji
        function getGiftEmoji(giftName) {
            const giftEmojis = {
                'çˆ±å¿ƒ': 'â¤ï¸',
                'ç«ç‘°': 'ğŸŒ¹',
                'çš‡å† ': 'ğŸ‘‘',
                'ç«ç®­': 'ğŸš€'
            };
            return giftEmojis[giftName] || 'ğŸ';
        }

        // æ’­æ”¾ç¤¼ç‰©éŸ³æ•ˆ
        function playGiftSound(type) {
            const audio = new Audio();
            switch(type) {
                case 'normal':
                    audio.src = 'path_to_normal_gift_sound.mp3';
                    break;
                case 'special':
                    audio.src = 'path_to_special_gift_sound.mp3';
                    break;
                case 'luxury':
                    audio.src = 'path_to_luxury_gift_sound.mp3';
                    break;
            }
            audio.play().catch(e => console.log('æ’­æ”¾éŸ³æ•ˆå¤±è´¥:', e));
        }

        // æ›´æ–°ç¤¼ç‰©ç»Ÿè®¡
        function updateGiftStats(price) {
            const statsElement = document.querySelector('.stats-item:nth-child(2) span');
            const currentValue = parseFloat(statsElement.textContent.replace('w', ''));
            const newValue = (currentValue + price/10000).toFixed(1);
            statsElement.textContent = newValue + 'w';
        }

        // ç‚¹èµåŠ¨ç”»
        function addLike() {
            const container = document.getElementById('likeAnimation');
            
            // åˆ›å»ºå¤šä¸ªå¿ƒå½¢å›¾æ ‡
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const like = document.createElement('div');
                    like.className = 'like-icon';
                    like.innerHTML = 'â¤ï¸';
                    like.style.fontSize = '24px';
                    like.style.left = Math.random() * 40 + 'px';
                    
                    // æ·»åŠ éšæœºåŠ¨ç”»æ•ˆæœ
                    like.style.animation = `likeFloat ${1.5 + Math.random()}s ease-out forwards`;
                    like.style.transform = `rotate(${Math.random() * 30 - 15}deg)`;
                    
                    container.appendChild(like);

                    // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                    setTimeout(() => like.remove(), 2000);
                }, i * 200);
            }

            // æ›´æ–°ç‚¹èµæ•°
            updateLikeStats();
        }

        // æ›´æ–°ç‚¹èµç»Ÿè®¡
        function updateLikeStats() {
            const statsElement = document.querySelector('.stats-item:nth-child(1) span');
            const currentValue = parseFloat(statsElement.textContent.replace('w', ''));
            const newValue = (currentValue + 0.1).toFixed(1);
            statsElement.textContent = newValue + 'w';
        }

        // åˆ†äº«ç›´æ’­
        function shareStream() {
            const shareOptions = document.createElement('div');
            shareOptions.className = 'share-options';
            shareOptions.innerHTML = `
                <div class="share-overlay"></div>
                <div class="share-content">
                    <h3>åˆ†äº«ç›´æ’­</h3>
                    <div class="share-grid">
                        <div class="share-item" onclick="shareToWeChat()">
                            <i class="material-icons">wechat</i>
                            <span>å¾®ä¿¡</span>
                        </div>
                        <div class="share-item" onclick="shareToMoments()">
                            <i class="material-icons">timeline</i>
                            <span>æœ‹å‹åœˆ</span>
                        </div>
                        <div class="share-item" onclick="shareToQQ()">
                            <i class="material-icons">chat</i>
                            <span>QQ</span>
                        </div>
                        <div class="share-item" onclick="shareToWeibo()">
                            <i class="material-icons">web</i>
                            <span>å¾®åš</span>
                        </div>
                    </div>
                    <button class="share-cancel" onclick="closeShare()">å–æ¶ˆ</button>
                </div>
            `;
            document.body.appendChild(shareOptions);
        }

        // å…³é—­ç›´æ’­é—´
        function closeLiveRoom() {
            window.location.href = 'yulezhibo.html';
        }

        // å¼¹å¹•ç³»ç»Ÿ
        function addDanmaku(text, color = '#fff') {
            const container = document.getElementById('danmakuContainer');
            const danmaku = document.createElement('div');
            danmaku.className = 'danmaku';
            danmaku.textContent = text;
            danmaku.style.color = color;
            danmaku.style.top = Math.random() * (container.offsetHeight - 30) + 'px';
            container.appendChild(danmaku);

            // åŠ¨ç”»ç»“æŸåç§»é™¤å¼¹å¹•
            danmaku.addEventListener('animationend', () => {
                danmaku.remove();
            });
        }

        // PKåŠŸèƒ½
        let isPKActive = false;
        let pkTimer = null;
        let pkScores = { left: 0, right: 0 };

        function togglePK() {
            if (isPKActive) {
                // å…³é—­PK
                clearInterval(pkTimer);
                document.getElementById('pkContainer').classList.remove('active');
                isPKActive = false;
                pkScores = { left: 0, right: 0 };
            } else {
                // å¼€å¯PK
                isPKActive = true;
                pkScores = { left: 0, right: 0 };
                const pkContainer = document.getElementById('pkContainer');
                pkContainer.classList.add('active');
                
                // é‡ç½®è¿›åº¦æ¡å’Œåˆ†æ•°
                document.querySelector('.pk-progress.pk-left').style.width = '50%';
                document.querySelector('.pk-progress.pk-right').style.width = '50%';
                
                // æ›´æ–°PKä¿¡æ¯æ˜¾ç¤º
                const pkInfo = pkContainer.querySelector('.pk-info');
                pkInfo.innerHTML = `
                    <span>0</span>
                    <span>05:00</span>
                    <span>0</span>
                `;
                
                // å¼€å§‹å€’è®¡æ—¶
                let time = 300; // 5åˆ†é’Ÿ
                pkTimer = setInterval(() => {
                    time--;
                    const minutes = Math.floor(time / 60);
                    const seconds = time % 60;
                    pkInfo.querySelector('span:nth-child(2)').textContent = 
                        `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    
                    if (time <= 0) {
                        clearInterval(pkTimer);
                        determinePKWinner();
                    }
                }, 1000);
            }
        }

        // ç¾é¢œå¼€å…³
        let isBeautyOn = false;
        function toggleBeauty() {
            isBeautyOn = !isBeautyOn;
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„ç¾é¢œæ•ˆæœ
            alert(isBeautyOn ? 'ç¾é¢œå·²å¼€å¯' : 'ç¾é¢œå·²å…³é—­');
        }

        // å¼¹å¹•å¼€å…³
        let isDanmakuOn = true;
        function toggleDanmaku() {
            isDanmakuOn = !isDanmakuOn;
            const container = document.getElementById('danmakuContainer');
            container.style.display = isDanmakuOn ? 'block' : 'none';
            alert(isDanmakuOn ? 'å¼¹å¹•å·²å¼€å¯' : 'å¼¹å¹•å·²å…³é—­');
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–è¯„è®ºåŒº
            initComments();

            // æ·»åŠ è¯„è®ºè¾“å…¥äº‹ä»¶ç›‘å¬
            const commentInput = document.getElementById('commentInput');
            if (commentInput) {
                commentInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const text = this.value.trim();
                        if (text) {
                            addComment(getUserName(), text);
                            if (isDanmakuOn) {
                                addDanmaku(text);
                            }
                            this.value = '';
                        }
                    }
                });
            }

            // æ·»åŠ ç¤¼ç‰©é¢æ¿æŒ‰é’®äº‹ä»¶
            const giftBtn = document.querySelector('.action-btn:nth-child(1)');
            if (giftBtn) {
                giftBtn.addEventListener('click', toggleGiftPanel);
            }

            // æ·»åŠ ç‚¹èµæŒ‰é’®äº‹ä»¶
            const likeBtn = document.querySelector('.action-btn:nth-child(2)');
            if (likeBtn) {
                likeBtn.addEventListener('click', addLike);
            }

            // æ·»åŠ åˆ†äº«æŒ‰é’®äº‹ä»¶
            const shareBtn = document.querySelector('.action-btn:nth-child(3)');
            if (shareBtn) {
                shareBtn.addEventListener('click', shareStream);
            }

            // æ·»åŠ PKæŒ‰é’®äº‹ä»¶
            const pkBtn = document.querySelector('.action-btn:nth-child(4)');
            if (pkBtn) {
                pkBtn.addEventListener('click', togglePK);
            }

            // æ·»åŠ ç¤¼ç‰©é¢æ¿å…³é—­æŒ‰é’®äº‹ä»¶
            const giftPanelCloseBtn = document.querySelector('.gift-panel-close');
            if (giftPanelCloseBtn) {
                giftPanelCloseBtn.addEventListener('click', toggleGiftPanel);
            }

            // æ·»åŠ ç¤¼ç‰©é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.gift-item').forEach(item => {
                item.addEventListener('click', function() {
                    const giftName = this.querySelector('.gift-name').textContent;
                    const price = parseInt(this.querySelector('.gift-price').textContent);
                    sendGift(giftName, price, 'normal');
                });
            });

            // æ·»åŠ å……å€¼æŒ‰é’®äº‹ä»¶
            const rechargeBtn = document.querySelector('.recharge-btn');
            if (rechargeBtn) {
                rechargeBtn.addEventListener('click', showRechargeModal);
            }

            // æ·»åŠ å……å€¼å¼¹çª—å…³é—­æŒ‰é’®äº‹ä»¶
            const rechargeCloseBtn = document.querySelector('.recharge-modal .close-btn');
            if (rechargeCloseBtn) {
                rechargeCloseBtn.addEventListener('click', closeRechargeModal);
            }

            // æ·»åŠ å……å€¼é€‰é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.recharge-item').forEach(item => {
                item.addEventListener('click', function() {
                    const amount = parseInt(this.querySelector('.amount').textContent);
                    selectRechargeAmount(amount);
                });
            });

            // æ·»åŠ æ”¯ä»˜æ–¹å¼é€‰æ‹©äº‹ä»¶
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', function() {
                    const paymentType = this.querySelector('img').alt === 'å¾®ä¿¡æ”¯ä»˜' ? 'wechat' : 'alipay';
                    selectPaymentMethod(paymentType);
                });
            });

            // æ·»åŠ ç¡®è®¤å……å€¼æŒ‰é’®äº‹ä»¶
            const confirmRechargeBtn = document.querySelector('.confirm-recharge');
            if (confirmRechargeBtn) {
                confirmRechargeBtn.addEventListener('click', confirmRecharge);
            }

            // æ·»åŠ å…³æ³¨æŒ‰é’®äº‹ä»¶
            const followBtn = document.querySelector('.follow-btn');
            if (followBtn) {
                followBtn.addEventListener('click', function(event) {
                    toggleFollow(event);
                });
            }

            // è·å–å¹¶æ›´æ–°ä¸»æ’­ä¿¡æ¯
            const anchorInfo = JSON.parse(localStorage.getItem('currentAnchor'));
            if (anchorInfo) {
                document.querySelector('.anchor-name').textContent = anchorInfo.name;
                document.querySelector('.anchor-avatar').src = anchorInfo.avatar;
                document.querySelector('.viewers-count span').textContent = anchorInfo.viewers;
                document.querySelector('.stats-item:nth-child(1) span').textContent = anchorInfo.likes;
                document.querySelector('.stats-item:nth-child(2) span').textContent = anchorInfo.gifts;
            }

            // è·å–ç”¨æˆ·é‡‘å¸æ•°
            const userCoins = localStorage.getItem('userCoins') || 888;
            document.getElementById('userCoins').textContent = userCoins;

            // æ·»åŠ æ»‘åŠ¨è¿”å›åŠŸèƒ½
            let startX = 0;
            let startY = 0;
            const threshold = 50;

            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });

            document.addEventListener('touchmove', (e) => {
                if (startX < 50) {
                    const deltaX = e.touches[0].clientX - startX;
                    const deltaY = Math.abs(e.touches[0].clientY - startY);
                    
                    if (deltaX > deltaY && deltaX > 0) {
                        e.preventDefault();
                    }
                }
            }, { passive: false });

            document.addEventListener('touchend', (e) => {
                if (startX < 50) {
                    const deltaX = e.changedTouches[0].clientX - startX;
                    const deltaY = Math.abs(e.changedTouches[0].clientY - startY);
                    
                    if (deltaX > threshold && deltaX > deltaY) {
                        window.location.href = 'yulezhibo.html';
                    }
                }
            });

            // æ¨¡æ‹Ÿå®æ—¶è¯„è®ºå’Œå¼¹å¹•
            setInterval(() => {
                const randomComment = mockComments[Math.floor(Math.random() * mockComments.length)];
                addComment(randomComment.user, randomComment.text);
                if (isDanmakuOn) {
                    addDanmaku(randomComment.text);
                }
            }, 3000);
        });

        // ç§»é™¤æ‰€æœ‰çš„ onclick å±æ€§ï¼Œæ”¹ç”¨äº‹ä»¶ç›‘å¬
        document.querySelectorAll('[onclick]').forEach(element => {
            const onclickValue = element.getAttribute('onclick');
            element.removeAttribute('onclick');
            if (onclickValue.includes('(')) {
                const functionName = onclickValue.split('(')[0];
                element.addEventListener('click', window[functionName]);
            }
        });

        // åˆ†äº«åˆ°ä¸åŒå¹³å°çš„å‡½æ•°
        function shareToWeChat() {
            alert('æ­£åœ¨è°ƒèµ·å¾®ä¿¡...');
            closeShare();
        }

        function shareToMoments() {
            alert('æ­£åœ¨è°ƒèµ·æœ‹å‹åœˆ...');
            closeShare();
        }

        function shareToQQ() {
            alert('æ­£åœ¨è°ƒèµ·QQ...');
            closeShare();
        }

        function shareToWeibo() {
            alert('æ­£åœ¨è°ƒèµ·å¾®åš...');
            closeShare();
        }

        function closeShare() {
            const shareOptions = document.querySelector('.share-options');
            if (shareOptions) {
                shareOptions.remove();
            }
        }

        // ä¿®æ”¹PKè¿›åº¦æ›´æ–°å‡½æ•°
        function updatePKProgress(price) {
            if (!isPKActive) return;
            
            pkScores.left += price;
            const totalScore = pkScores.left + pkScores.right;
            
            // è®¡ç®—ç™¾åˆ†æ¯”
            const leftPercentage = totalScore === 0 ? 50 : (pkScores.left / totalScore) * 100;
            const rightPercentage = totalScore === 0 ? 50 : (pkScores.right / totalScore) * 100;
            
            // æ›´æ–°è¿›åº¦æ¡
            const leftProgress = document.querySelector('.pk-progress.pk-left');
            const rightProgress = document.querySelector('.pk-progress.pk-right');
            
            leftProgress.style.width = `${leftPercentage}%`;
            rightProgress.style.width = `${rightPercentage}%`;
            
            // æ›´æ–°PKåˆ†æ•°æ˜¾ç¤º
            const pkInfo = document.querySelector('.pk-info');
            pkInfo.innerHTML = `
                <span>${Math.floor(pkScores.left)}</span>
                <span>05:00</span>
                <span>${Math.floor(pkScores.right)}</span>
            `;
        }

        // åˆ¤å®šPKèƒœè´Ÿ
        function determinePKWinner() {
            const result = pkScores.left > pkScores.right ? 'win' : 
                          pkScores.left < pkScores.right ? 'lose' : 'draw';
            
            const container = document.querySelector('.live-container');
            const resultEl = document.createElement('div');
            resultEl.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 20px 40px;
                border-radius: 12px;
                font-size: 24px;
                animation: fadeIn 0.5s ease;
            `;
            
            let resultText = '';
            switch(result) {
                case 'win':
                    resultText = 'ğŸ‰ PKèƒœåˆ©ï¼';
                    break;
                case 'lose':
                    resultText = 'ğŸ˜¢ PKå¤±è´¥';
                    break;
                case 'draw':
                    resultText = 'ğŸ¤ å¹³å±€';
                    break;
            }
            
            resultEl.textContent = `${resultText}\næœ€ç»ˆæ¯”åˆ†ï¼š${Math.floor(pkScores.left)} VS ${Math.floor(pkScores.right)}`;
            container.appendChild(resultEl);
            
            // 3ç§’åç§»é™¤ç»“æœæ˜¾ç¤ºå¹¶é‡ç½®PK
            setTimeout(() => {
                resultEl.remove();
                isPKActive = false;
                document.getElementById('pkContainer').classList.remove('active');
                pkScores = { left: 0, right: 0 };
            }, 3000);
        }

        // è·å–ç”¨æˆ·åå‡½æ•°
        function getUserName() {
            // ä»localStorageè·å–ç”¨æˆ·åï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›é»˜è®¤å€¼
            return localStorage.getItem('userName') || 'ç”¨æˆ·';
        }

        function toggleFollow(event) {
            event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
            const btn = event.currentTarget;
            const isFollowed = btn.classList.contains('followed');
            
            if (isFollowed) {
                btn.classList.remove('followed');
                btn.innerHTML = '<i class="material-icons">add</i>';
                // æ˜¾ç¤ºå–æ¶ˆå…³æ³¨æç¤º
                showTip('å·²å–æ¶ˆå…³æ³¨');
            } else {
                btn.classList.add('followed');
                btn.innerHTML = '<i class="material-icons">done</i>';
                // æ˜¾ç¤ºå…³æ³¨æˆåŠŸæç¤º
                showTip('å…³æ³¨æˆåŠŸ');
            }
        }

        function showTip(text) {
            const tip = document.createElement('div');
            tip.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.7);
                color: white;
                padding: 10px 20px;
                border-radius: 20px;
                font-size: 14px;
                z-index: 1000;
                animation: fadeInOut 1.5s ease forwards;
            `;
            tip.textContent = text;
            document.body.appendChild(tip);

            setTimeout(() => tip.remove(), 1500);
        }

        // æ·»åŠ åŠ¨ç”»æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            }
        `;
        document.head.appendChild(style);

        // æ·»åŠ ç¤¼ç‰©æ¶ˆæ¯åŠ¨ç”»æ ·å¼
        const giftMessageStyle = `
        @keyframes giftSlide {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }
            10% {
                transform: translateX(0);
                opacity: 1;
            }
            80% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-100%);
                opacity: 0;
            }
        }`;

        // å°†æ ·å¼æ·»åŠ åˆ°é¡µé¢
        const styleSheet = document.createElement('style');
        styleSheet.textContent = giftMessageStyle;
        document.head.appendChild(styleSheet);

        // æ·»åŠ è½¨é“åŠ¨ç”»å‡½æ•°
        function createTrackAnimation(giftName, type) {
            const track = document.createElement('div');
            track.className = `gift-track gift-track-${Math.floor(Math.random() * 3) + 1}`;
            
            const item = document.createElement('div');
            item.style.cssText = `
                position: absolute;
                left: 0;
                display: flex;
                align-items: center;
                gap: 10px;
                background: rgba(0,0,0,0.6);
                padding: 8px 15px;
                border-radius: 30px;
                animation: trackMove ${type === 'luxury' ? 8 : 6}s linear forwards;
            `;
            
            item.innerHTML = `
                <span style="font-size: 24px;">${getGiftEmoji(giftName)}</span>
                <span style="color: #fff;">${getUserName()}</span>
            `;
            
            track.appendChild(item);
            document.body.appendChild(track);
            
            // ç”»ç»“æŸåç§»é™¤
            setTimeout(() => track.remove(), type === 'luxury' ? 8000 : 6000);
        }

        // æ·»åŠ å……å€¼ç›¸å…³åŠŸèƒ½
        let selectedAmount = 0;
        let selectedPayment = 'wechat';

        function showRechargeModal() {
            document.getElementById('rechargeModal').style.display = 'flex';
        }

        function closeRechargeModal() {
            document.getElementById('rechargeModal').style.display = 'none';
        }

        function selectRechargeAmount(amount) {
            selectedAmount = amount;
            // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.recharge-item').forEach(item => {
                item.classList.remove('selected');
            });
            // æ·»åŠ å½“å‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            event.currentTarget.classList.add('selected');
        }

        function selectPaymentMethod(method) {
            selectedPayment = method;
            // ç§»é™¤å…¶ä»–æ”¯ä»˜æ–¹å¼çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.payment-method').forEach(item => {
                item.classList.remove('active');
            });
            // æ·»åŠ å½“å‰æ”¯ä»˜æ–¹å¼çš„é€‰ä¸­çŠ¶æ€
            event.currentTarget.classList.add('active');
        }

        function confirmRecharge() {
            if (selectedAmount === 0) {
                alert('è¯·é€‰æ‹©å……å€¼é‡‘é¢');
                return;
            }
            
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ”¯ä»˜é€»è¾‘
            alert(`æ­£åœ¨è·³è½¬${selectedPayment === 'wechat' ? 'å¾®ä¿¡' : 'æ”¯ä»˜å®'}æ”¯ä»˜...`);
            
            // æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
            setTimeout(() => {
                const currentCoins = parseInt(document.getElementById('userCoins').textContent);
                const newCoins = currentCoins + selectedAmount;
                document.getElementById('userCoins').textContent = newCoins;
                
                closeRechargeModal();
                alert('å……å€¼æˆåŠŸï¼');
            }, 1000);
        }
    </script>
</body>
</html> 