<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç›´æ’­é—´</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        /* ç›´æ’­è§†é¢‘åŒºåŸŸ */
        .live-container {
            position: relative;
            width: 100%;
            height: 100vh;
            background: #000;
        }

        .live-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* é¡¶éƒ¨ä¿¡æ¯æ  */
        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px;
            display: flex;
            align-items: flex-start;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
        }

        .streamer-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .streamer-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #fff;
        }

        .streamer-details {
            flex: 1;
        }

        .streamer-name {
            font-size: 16px;
            font-weight: 500;
        }

        .viewer-count {
            font-size: 12px;
            color: rgba(255,255,255,0.8);
        }

        .follow-btn {
            background: #FF4D4F;
            color: #fff;
            border: none;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
        }

        /* åº•éƒ¨è¯„è®ºåŒº */
        .comments-section {
            position: absolute;
            bottom: 60px;
            left: 0;
            right: 0;
            height: 40%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 15px;
            overflow-y: auto;
            padding-bottom: 70px;
        }

        .comment {
            margin-bottom: 10px;
            display: flex;
            align-items: flex-start;
        }

        .comment-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .comment-content {
            flex: 1;
            padding: 4px 8px;
            border-radius: 0;
            background: none;
        }

        .comment-name {
            font-size: 12px;
            color: #FFA500;
            margin-right: 8px;
        }

        .comment-text {
            font-size: 14px;
            color: #fff;
        }

        /* åº•éƒ¨æ“ä½œæ  */
        .bottom-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .comment-input {
            flex: 1;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            color: #fff;
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #fff;
        }

        .action-btn i {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .action-count {
            font-size: 12px;
        }

        /* è¿”å›æŒ‰é’® */
        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            color: #fff;
            z-index: 100;
            cursor: pointer;
        }

        /* ç¤¼ç‰©åŠ¨ç”»åŒºåŸŸ */
        .gift-area {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 200px;
            pointer-events: none;
            z-index: 100;
            transform: translateY(-50%);
        }

        .gift-item {
            position: absolute;
            left: 15px;
            bottom: 0;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            animation: giftSlide 2s ease-out forwards;
        }

        @keyframes giftSlide {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }
            10% {
                transform: translateX(0);
                opacity: 1;
            }
            90% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* ä¿®æ”¹é¡¶éƒ¨ä¿¡æ¯æ æ ·å¼ */
        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px;
            display: flex;
            align-items: flex-start;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
        }

        /* ä¿®æ”¹ç‚¹èµæ•°é‡æ ·å¼ */
        .like-count {
            display: flex;
            align-items: center;
            gap: 4px;
            color: rgba(255,255,255,0.8);
            font-size: 12px;
        }

        .like-count i {
            color: #FF4D4F;
        }

        /* ä¿®æ”¹å…³æ³¨æŒ‰é’®å®¹å™¨æ ·å¼ */
        .follow-container {
            position: absolute;
            top: 90px;
            left: 15px;
            z-index: 100;
        }

        .follow-btn {
            background: #FF4D4F;
            color: #fff;
            border: none;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* ä¿®æ”¹ç¤¼ç‰©é¢æ¿æ ·å¼ */
        .gift-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            border-radius: 20px 20px 0 0;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            padding: 20px;
        }

        .gift-panel.show {
            transform: translateY(0);
        }

        .gift-panel-content {
            padding: 20px;
        }

        .gift-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: white;
        }

        .gift-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding: 10px;
        }

        .gift-item {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gift-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .gift-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .gift-name {
            color: white;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .gift-price {
            color: #FF6B6B;
            font-size: 12px;
        }

        /* æ·»åŠ ï¿½ï¿½èµåŠ¨ç”»æ ·å¼ */
        @keyframes floatHeart {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-20px, -100px) scale(1.2);
            }
            100% {
                transform: translate(-40px, -200px) scale(0);
                opacity: 0;
            }
        }

        .floating-heart {
            position: fixed;
            color: #FF4D4F;
            font-size: 24px;
            pointer-events: none;
            z-index: 1000;
            animation: floatHeart 1.5s ease-out forwards;
        }

        /* ä¿®æ”¹ç¤¼ç‰©åŠ¨ç”»æ ·å¼ */
        .gift-animation {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.6);
            padding: 15px 25px;
            border-radius: 40px;
            animation: giftShow 3s ease-out;
        }

        /* ä¿®æ”¹ç¤¼ç‰©åŠ¨ç”»å…³é”®å¸§ */
        @keyframes giftShow {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            10% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2);
            }
            20% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }

        /* ä¿®æ”¹ç¤¼ç‰©å†…å®¹æ ·å¼ */
        .gift-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .gift-icon {
            font-size: 40px;
        }

        .gift-info {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .gift-sender {
            color: #FFA500;
            font-size: 16px;
            font-weight: 500;
        }

        .gift-name {
            color: #fff;
            font-size: 14px;
        }

        /* æ·»åŠ å‘é€è€…å¤´åƒæ ·å¼ */
        .sender-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #fff;
        }

        /* æ·»åŠ ç¤¼ç‰©ç‰¹æ•ˆæ ·å¼ */
        .gift-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 99;
        }

        .gift-particle {
            position: absolute;
            animation: particleFly 3s ease-out forwards;
            font-size: 24px;
        }

        .heart {
            animation: heartFloat 3s ease-out forwards;
        }

        .flower {
            animation: flowerSpin 3s ease-out forwards;
        }

        .diamond {
            animation: diamondSparkle 3s ease-out forwards;
        }

        @keyframes heartFloat {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-100px, -150px) scale(1.2);
                opacity: 0.8;
            }
            100% {
                transform: translate(-200px, -300px) scale(0);
                opacity: 0;
            }
        }

        @keyframes flowerSpin {
            0% {
                transform: rotate(0deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: rotate(720deg) scale(0);
                opacity: 0;
            }
        }

        @keyframes diamondSparkle {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        /* ä¿®æ”¹å…³æ³¨æŒ‰é’®æ ·å¼ */
        .follow-btn {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FF4D4F;
            color: #fff;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            cursor: pointer;
            bottom: -5px;
            right: -5px;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* ä¿®æ”¹ä¸»æ’­å¤´åƒå®¹å™¨æ ·å¼ */
        .streamer-avatar-container {
            position: relative;
            margin-right: 10px;
        }

        /* ä¿®æ”¹ç¤¼ç‰©åŠ¨ç”»æ ·å¼ */
        .gift-animation {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.6);
            padding: 15px 25px;
            border-radius: 40px;
            animation: giftShow 3s ease-out;
            min-width: 200px;
        }

        .gift-content {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
        }

        .gift-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .gift-sender {
            color: #FFA500;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .sender-name {
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="live-container">
        <!-- ç›´æ’­è§†é¢‘ -->
        <video class="live-video" autoplay muted loop>
            <source src="your_video_source.mp4" type="video/mp4">
        </video>

        <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
        <div class="top-bar">
            <div class="streamer-info">
                <div class="streamer-avatar-container">
                    <img class="streamer-avatar" src="https://s1.imagehub.cc/images/2024/11/08/517863d36cc7513386d28d457636008d.jpeg" alt="ä¸»æ’­å¤´åƒ">
                    <button class="follow-btn" id="followBtn">+</button>
                </div>
                <div class="streamer-details">
                    <div class="streamer-name">å°ç”œç”œ</div>
                    <div class="like-count">
                        <i class="material-icons" style="font-size: 14px;">favorite</i>
                        <span id="likeCounter">1.2w</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ·»åŠ å…³æ³¨æŒ‰é’®åˆ°å¤´åƒä¸‹æ–¹ -->
        <div class="follow-container">
            <button class="follow-btn">å…³æ³¨</button>
        </div>

        <!-- è¯„è®ºåŒº -->
        <div class="comments-section">
            <div class="comment">
                <img class="comment-avatar" src="https://s1.imagehub.cc/images/2024/11/08/517863d36cc7513386d28d457636008d.jpeg" alt="ç”¨æˆ·å¤´åƒ">
                <div class="comment-content">
                    <div class="comment-name">ç”¨æˆ·1</div>
                    <div class="comment-text">ä¸»æ’­å¥½å‰å®³ï¼</div>
                </div>
            </div>
            <!-- æ›´å¤šè¯„è®º... -->
        </div>

        <!-- ç¤¼ç‰©åŠ¨ç”»åŒºåŸŸ -->
        <div class="gift-area"></div>

        <!-- åº•éƒ¨æ“ä½œæ  -->
        <div class="bottom-bar">
            <input type="text" class="comment-input" placeholder="è¯´ç‚¹ä¹ˆ...">
            <div class="action-buttons">
                <div class="action-btn">
                    <i class="material-icons">favorite</i>
                    <span class="action-count">1.2w</span>
                </div>
                <div class="action-btn">
                    <i class="material-icons">card_giftcard</i>
                    <span class="action-count">é€ç¤¼ç‰©</span>
                </div>
                <div class="action-btn">
                    <i class="material-icons">share</i>
                    <span class="action-count">åˆ†äº«</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿè¯„è®ºæ•°æ®
        const comments = [
            { name: "ç”¨æˆ·1", text: "ä¸»æ’­å¥½å‰å®³ï¼", avatar: "https://s1.imagehub.cc/images/2024/11/08/517863d36cc7513386d28d457636008d.jpeg" },
            { name: "ç”¨æˆ·2", text: "ç©å¾—çœŸå¥½", avatar: "https://s1.imagehub.cc/images/2024/11/08/517863d36cc7513386d28d457636008d.jpeg" },
            // æ›´å¤šè¯„è®º...
        ];

        // åœ¨é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæ‰€æœ‰åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // 1. åˆå§‹åŒ–æ‰‹åŠ¿è¿”å›
            initGestureBack();
            
            // 2. åˆå§‹åŒ–ç‚¹èµåŠŸèƒ½
            initLikeFeature();
            
            // 3. åˆå§‹åŒ–ç¤¼ç‰©åŠŸèƒ½
            initGiftFeature();
            
            // 4. åˆå§‹åŒ–è¯„è®ºåŠŸèƒ½
            initCommentFeature();
            
            // 5. åˆå§‹åŒ–å…³æ³¨åŠŸèƒ½
            initFollowFeature();
        });

        // æ‰‹åŠ¿è¿”å›åŠŸèƒ½
        function initGestureBack() {
            let startX = 0;
            let startY = 0;
            const threshold = 50;

            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });

            document.addEventListener('touchmove', (e) => {
                if (startX < 50) {
                    const deltaX = e.touches[0].clientX - startX;
                    const deltaY = Math.abs(e.touches[0].clientY - startY);
                    
                    if (deltaX > deltaY && deltaX > 0) {
                        e.preventDefault();
                    }
                }
            }, { passive: false });

            document.addEventListener('touchend', (e) => {
                if (startX < 50) {
                    const deltaX = e.changedTouches[0].clientX - startX;
                    const deltaY = Math.abs(e.changedTouches[0].clientY - startY);
                    
                    if (deltaX > threshold && deltaX > deltaY) {
                        window.location.href = 'yulezhibo.html';
                    }
                }
            });
        }

        // ç‚¹èµåŠŸèƒ½
        function initLikeFeature() {
            let likeCount = 12000;
            let dailyLikeCount = 0;
            const MAX_DAILY_LIKES = 3000;
            const likeBtn = document.querySelector('.action-btn i[class*="favorite"]').parentElement;
            const likeCounter = document.getElementById('likeCounter');

            // æ£€æŸ¥å¹¶é‡ç½®æ¯æ—¥ç‚¹èµæ¬¡æ•°
            checkAndResetDailyLikes();
            
            // ç»‘å®šç‚¹èµäº‹ä»¶
            likeBtn.addEventListener('click', () => {
                if (dailyLikeCount >= MAX_DAILY_LIKES) {
                    alert('ä»Šæ—¥ç‚¹èµæ¬¡æ•°å·²è¾¾ä¸Šé™(3000æ¬¡)ï¼Œæ˜å¤©å†æ¥å§~');
                    return;
                }
                
                likeCount++;
                dailyLikeCount++;
                localStorage.setItem('dailyLikeCount', dailyLikeCount.toString());
                likeCounter.textContent = formatNumber(likeCount);
                createFloatingHeart(likeBtn);
            });
        }

        // ç¤¼ç‰©åŠŸèƒ½
        function initGiftFeature() {
            const giftBtn = document.querySelector('.action-btn i[class*="card_giftcard"]').parentElement;
            giftBtn.addEventListener('click', showGiftPanel);
        }

        // è¯„è®ºåŠŸèƒ½
        function initCommentFeature() {
            const commentInput = document.querySelector('.comment-input');
            
            commentInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && this.value.trim()) {
                    const newComment = {
                        name: "æˆ‘",
                        text: this.value.trim()
                    };
                    addComment(newComment);
                    this.value = '';
                }
            });

            // è‡ªåŠ¨æ·»åŠ æ¨¡æ‹Ÿè¯„è®º
            setInterval(() => {
                const randomComment = comments[Math.floor(Math.random() * comments.length)];
                addComment(randomComment);
            }, 3000);
        }

        // å…³æ³¨åŠŸèƒ½
        function initFollowFeature() {
            const followBtn = document.getElementById('followBtn');
            let isFollowing = false;

            followBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                isFollowing = !isFollowing;
                this.textContent = isFollowing ? 'âœ“' : '+';
                this.classList.toggle('following');
                this.style.background = isFollowing ? '#666' : '#FF4D4F';
            });
        }

        // å·¥å…·å‡½æ•°
        function formatNumber(num) {
            return num >= 10000 ? (num / 10000).toFixed(1) + 'w' : num.toString();
        }

        function checkAndResetDailyLikes() {
            const lastLikeDate = localStorage.getItem('lastLikeDate');
            const today = new Date().toDateString();
            
            if (lastLikeDate !== today) {
                localStorage.setItem('dailyLikeCount', '0');
                localStorage.setItem('lastLikeDate', today);
                return 0;
            }
            return parseInt(localStorage.getItem('dailyLikeCount') || '0');
        }

        function createFloatingHeart(likeBtn) {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.innerHTML = 'â¤ï¸';
            
            const rect = likeBtn.getBoundingClientRect();
            heart.style.left = `${rect.left + Math.random() * 20}px`;
            heart.style.bottom = `${window.innerHeight - rect.top}px`;
            
            document.body.appendChild(heart);
            heart.addEventListener('animationend', () => heart.remove());
        }

        function addComment(comment) {
            const commentsSection = document.querySelector('.comments-section');
            const commentElement = document.createElement('div');
            commentElement.className = 'comment';
            commentElement.innerHTML = `
                <span class="comment-name">${comment.name}</span>
                <span class="comment-text">${comment.text}</span>
            `;
            commentsSection.appendChild(commentElement);
            commentsSection.scrollTop = commentsSection.scrollHeight;
        }

        // å¤„ç†ç¤¼ç‰©åŠ¨ç”»
        function showGift(giftName) {
            const giftArea = document.querySelector('.gift-area');
            const giftElement = document.createElement('div');
            giftElement.className = 'gift-item';
            giftElement.textContent = `${giftName}`;
            giftArea.appendChild(giftElement);

            // åŠ¨ç”»ç»“æŸåç§»é™¤ç¤¼ç‰©å…ƒç´ 
            setTimeout(() => {
                giftElement.remove();
            }, 2000);
        }

        // æ¨¡æ‹Ÿç¤¼ç‰©å±•ç¤º
        setInterval(() => {
            const gifts = ['ğŸ', 'ğŸ’', 'ğŸŒ¹', 'ğŸ’', 'ğŸ‘‘'];
            const randomGift = gifts[Math.floor(Math.random() * gifts.length)];
            showGift(randomGift);
        }, 5000);

        // ä¿®æ”¹ç¤¼ç‰©é¢æ¿å’Œå‘é€ç¤¼ç‰©åŠŸèƒ½
        function showGiftPanel() {
            const giftPanel = document.createElement('div');
            giftPanel.className = 'gift-panel';
            giftPanel.innerHTML = `
                <div class="gift-panel-content">
                    <div class="gift-panel-header">
                        <h3>é€‰æ‹©ç¤¼ç‰©</h3>
                        <i class="material-icons close-gift-panel">close</i>
                    </div>
                    <div class="gift-grid">
                        <div class="gift-item" data-price="10" data-icon="ğŸ" data-effect="basic">
                            <div class="gift-icon">ğŸ</div>
                            <div class="gift-name">å¹¸è¿ç¤¼ç›’</div>
                            <div class="gift-price">10é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="50" data-icon="ğŸ’" data-effect="hearts">
                            <div class="gift-icon">ğŸ’</div>
                            <div class="gift-name">çˆ±å¿ƒ</div>
                            <div class="gift-price">50é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="100" data-icon="ğŸŒ¹" data-effect="flowers">
                            <div class="gift-icon">ğŸŒ¹</div>
                            <div class="gift-name">ç«ç‘°</div>
                            <div class="gift-price">100é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="200" data-icon="ğŸˆ" data-effect="balloons">
                            <div class="gift-icon">ğŸˆ</div>
                            <div class="gift-name">æ°”çƒ</div>
                            <div class="gift-price">200é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="500" data-icon="ğŸ’" data-effect="diamonds">
                            <div class="gift-icon">ğŸ’</div>
                            <div class="gift-name">é’»çŸ³</div>
                            <div class="gift-price">500é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="1000" data-icon="ğŸ‘‘" data-effect="crown">
                            <div class="gift-icon">ğŸ‘‘</div>
                            <div class="gift-name">çš‡å† </div>
                            <div class="gift-price">1000é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="2000" data-icon="ğŸš—" data-effect="car">
                            <div class="gift-icon">ğŸš—</div>
                            <div class="gift-name">è±ªè½¦</div>
                            <div class="gift-price">2000é‡‘å¸</div>
                        </div>
                        <div class="gift-item" data-price="5000" data-icon="ğŸ°" data-effect="castle">
                            <div class="gift-icon">ğŸ°</div>
                            <div class="gift-name">åŸå ¡</div>
                            <div class="gift-price">5000é‡‘å¸</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(giftPanel);
            setTimeout(() => giftPanel.classList.add('show'), 50);

            // æ·»åŠ ç¤¼ç‰©é¢æ¿æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                .gift-panel {
                    position: fixed;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    background: rgba(0,0,0,0.9);
                    z-index: 2000;
                    border-radius: 16px 16px 0 0;
                    transform: translateY(100%);
                    transition: transform 0.3s ease;
                }

                .gift-panel.show {
                    transform: translateY(0);
                }

                .gift-panel-content {
                    padding: 20px;
                }

                .gift-panel-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 20px;
                    color: white;
                }

                .gift-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 15px;
                }

                .gift-item {
                    background: rgba(255,255,255,0.1);
                    border-radius: 12px;
                    padding: 10px;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    color: white;
                }

                .gift-item:active {
                    transform: scale(0.95);
                    background: rgba(255,255,255,0.2);
                }

                .gift-icon {
                    font-size: 32px;
                    margin-bottom: 8px;
                }

                .gift-name {
                    font-size: 14px;
                    margin-bottom: 4px;
                }

                .gift-price {
                    font-size: 12px;
                    color: #FF6B6B;
                }
            `;
            document.head.appendChild(style);
            
            // å¤„ç†ç¤¼ç‰©ç‚¹å‡»
            giftPanel.querySelectorAll('.gift-item').forEach(item => {
                item.addEventListener('click', () => {
                    const icon = item.dataset.icon;
                    const price = parseInt(item.dataset.price);
                    const effect = item.dataset.effect;
                    sendGift(icon, price, effect);
                    giftPanel.classList.remove('show');
                    setTimeout(() => giftPanel.remove(), 300);
                });
            });
            
            // å¤„ç†å…³é—­æŒ‰é’®
            giftPanel.querySelector('.close-gift-panel').addEventListener('click', () => {
                giftPanel.classList.remove('show');
                setTimeout(() => giftPanel.remove(), 300);
            });
        }

        // ä¿®æ”¹å‘é€ç¤¼ç‰©å‡½
        function sendGift(icon, price, effect) {
            // è·å–ç”¨æˆ·åï¼Œå¦‚æœæ²¡æœ‰ç™»å½•åˆ™æ˜¾ç¤º"æ¸¸å®¢"
            const userInfo = JSON.parse(localStorage.getItem('userInfo'));
            const userName = userInfo ? userInfo.userName : 'æ¸¸å®¢' + Math.floor(Math.random() * 10000);
            
            // åˆ›å»ºç¤¼ç‰©åŠ¨ç”»
            const giftAnimation = document.createElement('div');
            giftAnimation.className = 'gift-animation';
            giftAnimation.innerHTML = `
                <div class="gift-content">
                    <img class="sender-avatar" src="https://s1.imagehub.cc/images/2024/11/08/517863d36cc7513386d28d457636008d.jpeg" alt="å¤´åƒ">
                    <div class="gift-info">
                        <div class="gift-sender">
                            <span class="sender-name">${userName}</span>
                            é€å‡º
                        </div>
                        <div class="gift-name">${icon}</div>
                    </div>
                </div>
            `;
            
            document.querySelector('.gift-area').appendChild(giftAnimation);
            
            // åˆ›å»ºç¤¼ç‰©ç‰¹æ•ˆ
            createGiftEffect(icon, effect);
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                giftAnimation.remove();
            }, 3000);
        }

        // æ·»åŠ ç¤¼ç‰©ç‰¹æ•ˆå‡½æ•°
        function createGiftEffect(icon, effect) {
            const effectContainer = document.createElement('div');
            effectContainer.className = 'gift-effect';
            document.querySelector('.live-container').appendChild(effectContainer);
            
            switch(effect) {
                case 'hearts':
                    createHeartsEffect(effectContainer);
                    break;
                case 'flowers':
                    createFlowersEffect(effectContainer);
                    break;
                case 'diamonds':
                    createDiamondsEffect(effectContainer);
                    break;
                case 'crown':
                    createCrownEffect(effectContainer);
                    break;
                case 'car':
                    createCarEffect(effectContainer);
                    break;
                case 'castle':
                    createCastleEffect(effectContainer);
                    break;
                default:
                    createBasicEffect(effectContainer, icon);
            }
            
            setTimeout(() => effectContainer.remove(), 3000);
        }

        // å„ç§ç‰¹æ•ˆå®ç°
        function createHeartsEffect(container) {
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.className = 'gift-particle heart';
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.animationDelay = `${Math.random() * 2}s`;
                container.appendChild(heart);
            }
        }

        function createFlowersEffect(container) {
            const flowers = ['ğŸŒ¹', 'ğŸŒ¸', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ¼'];
            for (let i = 0; i < 20; i++) {
                const flower = document.createElement('div');
                flower.className = 'gift-particle flower';
                flower.innerHTML = flowers[Math.floor(Math.random() * flowers.length)];
                flower.style.left = `${Math.random() * 100}%`;
                flower.style.animationDelay = `${Math.random() * 2}s`;
                container.appendChild(flower);
            }
        }

        function createDiamondsEffect(container) {
            for (let i = 0; i < 20; i++) {
                const diamond = document.createElement('div');
                diamond.className = 'gift-particle diamond';
                diamond.innerHTML = 'ğŸ’';
                diamond.style.left = `${Math.random() * 100}%`;
                diamond.style.animationDelay = `${Math.random() * 2}s`;
                container.appendChild(diamond);
            }
        }

        // å¤„ç†åˆ†äº«åŠŸèƒ½
        document.querySelector('.action-btn i[class*="share"]').parentElement.addEventListener('click', function() {
            showSharePanel();
        });

        // æ˜¾ç¤ºåˆ†äº«é¢æ¿
        function showSharePanel() {
            const sharePanel = document.createElement('div');
            sharePanel.className = 'share-panel';
            sharePanel.innerHTML = `
                <div class="share-content">
                    <div class="share-header">
                        åˆ†äº«åˆ°
                        <i class="material-icons close-share">close</i>
                    </div>
                    <div class="share-options">
                        <div class="share-option">
                            <i class="material-icons">wechat</i>
                            <span>å¾®ä¿¡</span>
                        </div>
                        <div class="share-option">
                            <i class="material-icons">chat</i>
                            <span>æœ‹å‹åœˆ</span>
                        </div>
                        <div class="share-option">
                            <i class="material-icons">link</i>
                            <span>å¤åˆ¶é“¾æ¥</span>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(sharePanel);

            // æ·»åŠ åˆ†äº«é¢æ¿æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                .share-panel {
                    position: fixed;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    background: white;
                    border-radius: 16px 16px 0 0;
                    z-index: 2000;
                    animation: slideUp 0.3s ease-out;
                }

                .share-content {
                    padding: 20px;
                }

                .share-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 20px;
                    color: #333;
                    font-size: 16px;
                }

                .share-options {
                    display: flex;
                    justify-content: space-around;
                }

                .share-option {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                    cursor: pointer;
                }

                .share-option i {
                    font-size: 32px;
                    color: #666;
                }

                .share-option span {
                    font-size: 12px;
                    color: #666;
                }
            `;
            document.head.appendChild(style);

            // å¤„ç†å…³é—­æŒ‰é’®
            sharePanel.querySelector('.close-share').addEventListener('click', () => {
                sharePanel.remove();
            });

            // å¤„ç†åˆ†äº«é€‰é¡¹ç‚¹å‡»
            sharePanel.querySelectorAll('.share-option').forEach(option => {
                option.addEventListener('click', () => {
                    alert('åˆ†äº«åŠŸèƒ½å¼€å‘ä¸­...');
                    sharePanel.remove();
                });
            });
        }
    </script>
</body>
</html> 